{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { StatusBar } from 'expo-status-bar';\nimport { useEffect, useState, useContext } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport styles from \"../styles\";\nimport AuthContext from \"../../contexts/auth\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction Feed() {\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      publicacoes = _useState4[0],\n      setPublicacoes = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      searchInput = _useState6[0],\n      setSearchInput = _useState6[1];\n\n  function getPublicacoes() {\n    fetch('http://localhost:3001/projeto/publicacoes').then(function (res) {\n      return res.json();\n    }).then(function (result) {\n      setPublicacoes(result);\n      setLoading(false);\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  }\n\n  function getPublicacoesByName(nome) {\n    setLoading(true);\n    fetch('http://localhost:3001/projeto/publicacoes' + nome).then(function (res) {\n      return res.json();\n    }).then(function (result) {\n      setPublicacoes(result);\n      setLoading(false);\n    }).catch(function (err) {\n      return console.log(err);\n    });\n    setLoading(false);\n  }\n\n  useEffect(function () {\n    getPublicacoes();\n  }, []);\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.titulo,\n      children: \"Meu Feed\"\n    }), _jsxs(View, {\n      style: styles.searchContainer,\n      children: [_jsx(TextInput, {\n        style: styles.input,\n        placeholder: \"Procurar publicacoes\",\n        onChangeText: function onChangeText(text) {\n          return setSearchInput(text);\n        }\n      }), _jsx(Button, {\n        title: \"Procurar\",\n        onPress: function onPress() {\n          return getPublicacoesByName(searchInput);\n        }\n      })]\n    }), isLoading ? _jsx(ActivityIndicator, {\n      size: \"large\"\n    }) : _jsx(FlatList, {\n      data: publicacoes,\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      },\n      renderItem: function renderItem(_ref) {\n        var item = _ref.item,\n            index = _ref.index;\n        return _jsxs(View, {\n          style: styles.post_cell,\n          children: [_jsx(Text, {\n            style: styles.titulo,\n            children: item.titulo\n          }), _jsx(Text, {\n            style: styles.conteudo,\n            children: item.descricao\n          })]\n        });\n      }\n    })]\n  });\n}\n\nexport default Feed;","map":{"version":3,"names":["StatusBar","useEffect","useState","useContext","styles","AuthContext","Feed","isLoading","setLoading","publicacoes","setPublicacoes","searchInput","setSearchInput","getPublicacoes","fetch","then","res","json","result","catch","err","console","log","getPublicacoesByName","nome","container","titulo","searchContainer","input","text","item","id","index","post_cell","conteudo","descricao"],"sources":["C:/expo react/mundo/src/pages/Dashboard/Feed.js"],"sourcesContent":["import { StatusBar } from 'expo-status-bar';\r\nimport { useEffect, useState, useContext } from 'react';\r\nimport { StyleSheet, Text, View, ActivityIndicator, Button, TextInput, FlatList } from 'react-native';\r\nimport styles from '../styles'\r\n\r\nimport AuthContext from '../../contexts/auth';\r\n\r\n/*\r\n    NÃO estou autorizado pela API para pegar as publicações devido à autenticação por token,\r\n    sendo assim, preciso mandar pelo fetch de cada um o header Authorization com o token para conseguir\r\n    acessar o JSON com elas.\r\n\r\n*/\r\n\r\n\r\n\r\n\r\nfunction Feed() {\r\n\r\n\r\n    const [isLoading, setLoading] = useState(true);\r\n    const [publicacoes, setPublicacoes] = useState([]);\r\n    const [searchInput, setSearchInput] = useState('');\r\n\r\n\r\n    function getPublicacoes(){\r\n        fetch('http://localhost:3001/projeto/publicacoes')\r\n        .then(res => res.json())\r\n        .then(result => {\r\n            setPublicacoes(result);\r\n            setLoading(false);\r\n        })\r\n        .catch(err => console.log(err));\r\n    }\r\n    \r\n    function getPublicacoesByName(nome){\r\n        setLoading(true);\r\n        fetch('http://localhost:3001/projeto/publicacoes'+nome)\r\n        .then(res => res.json())\r\n        .then(result => {\r\n            setPublicacoes(result);\r\n            setLoading(false);\r\n        })\r\n        .catch(err => console.log(err));\r\n        setLoading(false);\r\n    }\r\n\r\n    useEffect(()=>{\r\n        getPublicacoes()\r\n    }, []);\r\n\r\n    return(\r\n        <View style={styles.container}>\r\n            <Text style={styles.titulo}>Meu Feed</Text>\r\n            <View style={styles.searchContainer} >\r\n                <TextInput style={styles.input} placeholder='Procurar publicacoes' onChangeText={(text)=>setSearchInput(text)} />\r\n                <Button title='Procurar' onPress={()=>getPublicacoesByName(searchInput)} />\r\n            </View>\r\n            \r\n            {\r\n                isLoading ?\r\n                <ActivityIndicator size='large'/>\r\n                :\r\n                /* console.log(publicacoes) */\r\n                /*\r\n                Temos que 'desestruturar' a resposta do renderItem em partes diferentes\r\n\r\n                uma parte é o item em si (item) (nosso post)\r\n                a outra é o index do item (id dele na flatlist)\r\n                */\r\n                <FlatList\r\n                data={publicacoes}\r\n                keyExtractor={(item)=>item.id}\r\n                renderItem={({ item, index })=> (\r\n                    <View style={styles.post_cell}>\r\n                    <Text style={styles.titulo} >{item.titulo}</Text>\r\n                    <Text style={styles.conteudo} >{item.descricao}</Text>\r\n                    </View>\r\n                )}\r\n                />\r\n                \r\n            }\r\n        </View>\r\n    )\r\n\r\n\r\n}\r\n\r\nexport default Feed;"],"mappings":"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"},"metadata":{},"sourceType":"module"}